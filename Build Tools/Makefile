# Makefile ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö FIBO Card Commandos
# ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô‡πÄ‡∏Å‡∏°

# ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡πÄ‡∏•‡∏≠‡∏£‡πå
CXX = g++                                    # ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ g++ ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡πÄ‡∏•‡∏≠‡∏£‡πå
CXXFLAGS = -std=c++17 -Wall -Wextra -O2     # ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ flags ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡∏•‡πå
TARGET = fibo_card_commandos                 # ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á

# ‡πÑ‡∏î‡πÄ‡∏£‡∏Å‡∏ó‡∏≠‡∏£‡∏µ‡∏Ç‡∏≠‡∏á‡∏ã‡∏≠‡∏£‡πå‡∏™‡πÇ‡∏Ñ‡πâ‡∏î
GAME_CORE_DIR = Game\ Core                   # ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏Å‡πá‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏°
UI_SYSTEM_DIR = UI\ System                   # ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏Å‡πá‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô UI
DATA_DIR = Data                              # ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

# ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ã‡∏≠‡∏£‡πå‡∏™‡πÇ‡∏Ñ‡πâ‡∏î
SOURCES = $(GAME_CORE_DIR)/Main.cpp \
          $(GAME_CORE_DIR)/Card.cpp \
          $(GAME_CORE_DIR)/Deck.cpp \
          $(GAME_CORE_DIR)/Player.cpp \
          $(UI_SYSTEM_DIR)/UIHelper.cpp \
          $(UI_SYSTEM_DIR)/MenuSystem.cpp

# ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß
HEADERS = $(GAME_CORE_DIR)/Card.h \
          $(GAME_CORE_DIR)/Deck.h \
          $(GAME_CORE_DIR)/Player.h \
          $(UI_SYSTEM_DIR)/UIHelper.h \
          $(UI_SYSTEM_DIR)/MenuSystem.h \
          json.hpp

# ‡πÑ‡∏î‡πÄ‡∏£‡∏Å‡∏ó‡∏≠‡∏£‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏ß‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ
INCLUDES = -I"$(GAME_CORE_DIR)" -I"$(UI_SYSTEM_DIR)" -I.

# ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏Å
all: $(TARGET)

# ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
$(TARGET): $(SOURCES) $(HEADERS)
	@echo "üîß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡∏•‡πå FIBO Card Commandos..."
	$(CXX) $(CXXFLAGS) $(INCLUDES) $(SOURCES) -o $(TARGET)
	@echo "‚úÖ ‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡∏•‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!"
	@cp "$(DATA_DIR)/cards.json" "cards.json" 2>/dev/null || true

# ‡∏£‡∏±‡∏ô‡πÄ‡∏Å‡∏°
run: $(TARGET)
	@echo "üöÄ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° FIBO Card Commandos..."
	@echo ""
	./$(TARGET)

# ‡∏•‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£ build
clean:
	@echo "üßπ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå build..."
	rm -f $(TARGET) $(TARGET).exe cards.json

# Debug build
debug: CXXFLAGS += -g -DDEBUG
debug: $(TARGET)
	@echo "üêõ Debug build completed!"

# Windows-specific build
windows: CXXFLAGS += -static
windows: $(TARGET).exe

$(TARGET).exe: $(SOURCES) $(HEADERS)
	@echo "üîß Compiling for Windows..."
	$(CXX) $(CXXFLAGS) $(INCLUDES) $(SOURCES) -o $(TARGET).exe
	@echo "‚úÖ Windows compilation successful!"
	@cp "$(DATA_DIR)/cards.json" "cards.json" 2>nul || echo.

# Install dependencies (placeholder)
install-deps:
	@echo "üì¶ Installing dependencies..."
	@echo "‚ÑπÔ∏è  This project only requires a C++17 compatible compiler"
	@echo "   Make sure you have g++ or clang++ installed"

# Help
help:
	@echo "üìñ Available targets:"
	@echo "  all        - Build the game (default)"
	@echo "  run        - Build and run the game"
	@echo "  clean      - Remove build files"
	@echo "  debug      - Build with debug symbols"
	@echo "  windows    - Build Windows executable"
	@echo "  install-deps - Show dependency information"
	@echo "  help       - Show this help message"

# Declare phony targets
.PHONY: all run clean debug windows install-deps help